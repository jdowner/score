<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>score-example</title>
  </head>
  <script src="raphael-v2.1.2-min.js"></script>
  <script src="vexflow-min.js"></script>
  <style type="text/css">
    svg {
      overflow: visible;
      height: 1200px;
      width: 100%;
    }

    body {
      height: 100%;
      width: 100%;
    }
  </style>
  <script src="score.js"></script>
  <body>
    <svg id="score" version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>
  </body>
  <script>
    // Define the notes
    var notes = ""
    notes = notes + "4 4 4 4 | 8r 8 4 8r 4 8r | 4r 4 4 4r | 8r 4 8 8r 8 4r"
    notes = notes + " | 8r 8 4 4 4r | 4r 4r 4 8r 8 | 4 8r 8 8r 8 4r | 4r 4 4r 4"
    notes = notes + " | 4r (8 8) (8 8) 4r | 4 4r 4r 4 | 8r 8 8r 8 4 4r | 4 4 4r 8r 8"
    notes = notes + " | 4r 8r 8 8r 8 4r | 4 4r 4 4r | (8 8 8 8) 4r 4r | 4 8r 8 4r 8r 8"
    notes = notes + " | 8r 8 4 8r 8 (8 8) | 4r (8 8) 4r (8 8) | 4 8r 8 8r 8 4 | 4r 4 4r (8 8)"
    notes = notes + " | (8 8) 4r 4r (8 8) | 4r (8 8) 8r 8 4r | 4r 4 4r 8r 8 | 4 4 4r 4"
    notes = notes + " | 8r 8 4 4r (8 8) | 4r 4r 4r 4 | 4r (8 8) 4r 8r 8 | 8r 8 4 (8 8) 4r"
    notes = notes + " | 4r 4r (8 8 8 8) | 8r 8 4 4 4r | 4r (8 8) 4r 8 8r | 4 4r 8r 8 (8 8)"
    notes = notes + " | 4r 4 4r 8 8r | (8 8 8 8) 4r 4r | 4 8r 8 4r 4 | (8 8 8 8) (8 8 8 16 16)"

    // Extend the score to support shuffling
    Score.prototype.shuffle = function() {
      for (var i = this.staves.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var tmp = this.staves[i];
        this.staves[i] = this.staves[j];
        this.staves[j] = tmp;
      }
    }

    // Create a score object in the "score" element
    var score = new Score("score", notes)

    // Create initialization function to update and shuffle the score
    function init() {
      score.update()

      document.getElementById("score").addEventListener('click', function(e) {
        score.shuffle()
        score.update()
      })
    }

    window.addEventListener('load', init, false)
  </script>
</html>
