<!DOCTYPE html>
<html>
  <head>
    <title>drum-music-app</title>
  </head>
  <body>
    <canvas id="screen" width="800" height="600"> </canvas>
  </body>
  <script>
    var music = {
      init: function() {
        music.canvas = document.getElementById('screen')
        music.ctx = music.canvas.getContext('2d')

        music.rows = 4
        music.cols = 8

        music.bar_width = 100
        music.bar_height = 60

        music.bars = new Array()
        for(var k = 0; k < music.rows * music.cols; k++) {
          var num = 4 * k + 64
          music.bars[k] = {
            id: k,
            color: '#0000' + num.toString(16)
          }
        }
      }
    }

    music.draw = {
      bars: function() {
        for(var i = 0; i < music.rows; i++) {
          for(var j = 0; j < music.cols; j++) {
            var k = i * music.cols + j
            var bar = music.bars[k]
            music.ctx.save()
            music.ctx.fillStyle = bar.color
            music.ctx.strokeRect(j * music.bar_width, i * music.bar_height, music.bar_width, music.bar_height)
            music.ctx.fillRect(j * music.bar_width, i * music.bar_height, music.bar_width, music.bar_height)
            music.ctx.restore()

            music.ctx.save()
            music.ctx.fillStyle = '#FFFFFF'
            music.ctx.font = "bold 12px sans-serif"
            music.ctx.textBaseline = "top"
            music.ctx.fillText(bar.id.toString(), j * music.bar_width, i * music.bar_height)
            music.ctx.restore()
          }
        }
      }
    }

    function update() {
      music.draw.bars()
    }

    window.addEventListener('load', music.init, false)
    window.setInterval(update, 30)
  </script>
</html>
